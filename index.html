<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <!-- Âä®ÊÄÅËÆæÁΩÆËØ≠Ë®Ä -->
  <meta http-equiv="content-language" content="ru">
  <meta name="language" content="ru">
  
  <!-- Â§öËØ≠Ë®ÄÊ†áÈ¢òÂíåÊèèËø∞ -->
  <title data-i18n-meta="title">–ò–≥—Ä–∞—Ç—å –≤ 2048 –û–Ω–ª–∞–π–Ω | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –†–µ–∂–∏–º —Å –í—ã—Å–æ–∫–∏–º–∏ –°—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –ó–Ω–∞—á–µ–Ω–∏—è–º–∏</title>
  <meta name="description" data-i18n-meta="description" content="–ò–≥—Ä–∞–π—Ç–µ –≤ 2048 –æ–Ω–ª–∞–π–Ω —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –æ–ø—Ü–∏—è–º–∏! –ù–∞—á–Ω–∏—Ç–µ —Å –≤—ã—Å–æ–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ (32-512) –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É–≥–ª—É. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –∂–µ–ª–∞—é—â–∏—Ö —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞.">
  
  <!-- Â§öËØ≠Ë®ÄÈìæÊé•ÂÖ≥Á≥ª -->
  <link rel="canonical" href="https://www.play2048online.com/index.html">
  <link rel="alternate" hreflang="en" href="https://www.play2048online.com/index.html?lang=en">
  <link rel="alternate" hreflang="de" href="https://www.play2048online.com/index.html?lang=de">
  <link rel="alternate" hreflang="ja" href="https://www.play2048online.com/index.html?lang=ja">
  <link rel="alternate" hreflang="ru" href="https://www.play2048online.com/index.html?lang=ru">
  <link rel="alternate" hreflang="x-default" href="https://www.play2048online.com/index.html">
  <!-- Open Graph -->
  <meta property="og:title" data-i18n-meta="og_title" content="–ò–≥—Ä–∞—Ç—å –≤ 2048 –û–Ω–ª–∞–π–Ω | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞">
  <meta property="og:description" data-i18n-meta="og_description" content="–ò–≥—Ä–∞–π—Ç–µ –≤ 2048 –æ–Ω–ª–∞–π–Ω –≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º —Ä–µ–∂–∏–º–µ! –í—ã–±–µ—Ä–∏—Ç–µ —É–≥–æ–ª, –Ω–∞—á–Ω–∏—Ç–µ —Å –≤—ã—Å–æ–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ (32-512) –∏ –æ—Å–≤–æ–π—Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ!">
  <meta property="og:image" content="https://www.play2048online.com/meta/2048.png">
  <meta property="og:url" content="https://www.play2048online.com/index.html">
  <meta property="og:type" content="game">
  <meta property="og:locale" content="ru">
  <meta property="og:locale:alternate" content="en">
  <meta property="og:locale:alternate" content="de">
  <meta property="og:locale:alternate" content="ja">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" data-i18n-meta="twitter_title" content="–ò–≥—Ä–∞—Ç—å –≤ 2048 –û–Ω–ª–∞–π–Ω | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –†–µ–∂–∏–º">
  <meta name="twitter:description" data-i18n-meta="twitter_description" content="–ò–≥—Ä–∞–π—Ç–µ –≤ 2048 –æ–Ω–ª–∞–π–Ω —Å –≤—ã—Å–æ–∫–∏–º–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (32-512)! –í—ã–±–µ—Ä–∏—Ç–µ —É–≥–æ–ª –∏ –æ—Å–≤–æ–π—Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏–≥—Ä–∞!">
  <meta name="twitter:image" content="https://www.play2048online.com/meta/2048.png">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "VideoGame",
    "name": [
      {
        "@language": "en",
        "@value": "Play 2048 Online - Advanced Strategy Puzzle Game"
      },
      {
        "@language": "de",
        "@value": "2048 Online Spielen - Fortgeschrittenes Strategiespiel"
      },
      {
        "@language": "ja",
        "@value": "2048„Çí„Ç™„É≥„É©„Ç§„É≥„Åß„Éó„É¨„Ç§ - ‰∏äÁ¥öÊà¶Áï•„Éë„Ç∫„É´„Ç≤„Éº„É†"
      }
    ],
    "url": {
      "@type": "URL",
      "@value": "https://www.play2048online.com/index.html",
      "alternateName": [
        {
          "@language": "en",
          "@value": "https://www.play2048online.com/index.html?lang=en"
        },
        {
          "@language": "de",
          "@value": "https://www.play2048online.com/index.html?lang=de"
        },
        {
          "@language": "ja",
          "@value": "https://www.play2048online.com/index.html?lang=ja"
        },
        {
          "@language": "ru",
          "@value": "https://www.play2048online.com/index.html?lang=ru"
        }
      ]
    },
    "description": [
      {
        "@language": "en",
        "@value": "Play 2048 online with advanced start options! Begin with high-value tiles (32-512) in your chosen corner, perfect for experienced players who want to focus on advanced strategies. Free browser-based puzzle game with multilingual support."
      },
      {
        "@language": "de",
        "@value": "Spielen Sie 2048 online mit erweiterten Startoptionen! Beginnen Sie mit hochwertigen Kacheln (32-512) in Ihrer gew√§hlten Ecke, ideal f√ºr erfahrene Spieler, die sich auf fortgeschrittene Strategien konzentrieren m√∂chten. Kostenloses browserbasiertes Puzzlespiel mit mehrsprachiger Unterst√ºtzung."
      },
      {
        "@language": "ja",
        "@value": "È´òÂ∫¶„Å™ÈñãÂßã„Ç™„Éó„Ç∑„Éß„É≥„Åß2048„Çí„Ç™„É≥„É©„Ç§„É≥„Éó„É¨„Ç§ÔºÅÈÅ∏Êäû„Åó„Åü„Ç≥„Éº„Éä„Éº„Å´È´òÂæóÁÇπ„Çø„Ç§„É´(32-512)„ÇíÈÖçÁΩÆ„Åó„Å¶„Çπ„Çø„Éº„Éà„ÄÇ‰∏äÁ¥öËÄÖÂêë„Åë„ÅÆÊà¶Áï•„Å´ÁÑ¶ÁÇπ„ÇíÂΩì„Å¶„Åü„Éñ„É©„Ç¶„Ç∂„Éô„Éº„Çπ„ÅÆÁÑ°Êñô„Éë„Ç∫„É´„Ç≤„Éº„É†„ÄÇÂ§öË®ÄË™ûÂØæÂøú„ÄÇ"
      },
      {
        "@language": "ru",
        "@value": "–ò–≥—Ä–∞–π—Ç–µ –≤ 2048 –æ–Ω–ª–∞–π–Ω —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –æ–ø—Ü–∏—è–º–∏! –ù–∞—á–Ω–∏—Ç–µ —Å –≤—ã—Å–æ–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ (32-512) –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É–≥–ª—É, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –∂–µ–ª–∞—é—â–∏—Ö —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ —Å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π."
      }
    ],
    "genre": ["PuzzleGame", "StrategyGame"],
    "applicationCategory": "Game",
    "image": "https://www.play2048online.com/meta/2048.png",
    "author": {"@type":"Organization","name":"YourBrand"},
    "inLanguage": ["en", "de", "ja", "ru"],
    "gameFeature": [
      {
        "@type": "GamePlayMode",
        "name": "Advanced Start Mode",
        "description": "Start with high-value tiles (32-512) in chosen corner positions for advanced gameplay"
      },
      {
        "@type": "GamePlayMode",
        "name": "Strategic Corner Placement",
        "description": "Choose your preferred corner for optimal strategy in Play 2048 Online"
      }
    ],
    "audience": {
      "@type": "Audience",
      "audienceType": "Experienced Players",
      "description": "Perfect for players who want to skip the early game and focus on advanced 2048 strategies"
    },
    "gameDifficulty": "Advanced",
    "gamePlatform": "Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD",
      "availability": "http://schema.org/InStock"
    },
    "keywords": [
      "play 2048 online",
      "2048 game",
      "advanced 2048",
      "2048 strategy",
      "free puzzle game",
      "online strategy game",
      "browser game",
      "multilingual 2048",
      "advanced start mode",
      "corner strategy"
    ]
  }
  </script>
  <script src="https://analytics.ahrefs.com/analytics.js" data-key="PQoz9dwvClhduQYouMIvhQ" async></script>
  <link href="style/main.css?v=20250806170458" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="meta/apple-touch-icon.png">
  <link rel="apple-touch-startup-image" href="meta/apple-touch-startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"> <!-- iPhone 5+ -->
  <link rel="apple-touch-startup-image" href="meta/apple-touch-startup-image-640x920.png"  media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"> <!-- iPhone, retina -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
  <div class="container">
    <!-- ‰∏âÂàóÂØºËà™Ê†èÂ∏ÉÂ±Ä -->
    <nav class="navbar">
      <div class="navbar-left">
        <h1 class="title" data-i18n="title">2048</h1>
      </div>
      
      <!-- ‰∏≠Èó¥ÁöÑÂàÜÊï∞ÊòæÁ§∫Âå∫Âüü -->
      <div class="navbar-center">
        <div class="scores-container">
          <div class="score-container">
            <span class="score-label" data-i18n="score">SCORE</span>
            <span class="score-value">0</span>
          </div>
          <div class="best-container">
            <span class="best-label" data-i18n="best">BEST</span>
            <span class="best-value">0</span>
          </div>
        </div>
      </div>
      
      <div class="navbar-right">
        <select id="lang-select" onchange="setLang(this.value)">
          <option value="en">English</option>
          <option value="de">Deutsch</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="ru" selected>–†—É—Å—Å–∫–∏–π</option>
        </select>
        <button id="record-button" class="record-button" onclick="toggleRecording()" ontouchend="toggleRecording()">
          <span class="record-icon">üé•</span>
          <span class="record-text" data-i18n="start_recording">ÂΩïÂà∂</span>
        </button>
        <a class="restart-button" data-i18n="new_game" onclick="showNewGameDialog()" ontouchend="showNewGameDialog()">New Game</a>
      </div>

      <!-- Êñ∞Ê∏∏ÊàèËÆæÁΩÆÂØπËØùÊ°Ü -->
      <div id="new-game-dialog" class="dialog">
        <div class="dialog-content">
          <h3 data-i18n="new_game_settings">New Game Settings</h3>
          <div class="dialog-body">
            <div class="setting-group">
              <label data-i18n="start_number">Starting Number:</label>
              <select id="start-number">
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="8">8</option>
                <option value="16">16</option>
                <option value="32">32</option>
                <option value="64">64</option>
                <option value="128">128</option>
                <option value="256">256</option>
                <option value="512">512</option>
              </select>
            </div>
            <div class="setting-group">
              <label data-i18n="corner_position">Corner Position:</label>
              <div class="corner-selector">
                <button class="corner-btn" data-corner="0,0" data-i18n="top_left">Top Left</button>
                <button class="corner-btn" data-corner="3,0" data-i18n="top_right">Top Right</button>
                <button class="corner-btn" data-corner="0,3" data-i18n="bottom_left">Bottom Left</button>
                <button class="corner-btn" data-corner="3,3" data-i18n="bottom_right">Bottom Right</button>
              </div>
            </div>
          </div>
          <div class="dialog-footer">
            <button class="dialog-btn cancel-btn" onclick="hideNewGameDialog()" data-i18n="cancel">Cancel</button>
            <button class="dialog-btn start-btn" onclick="startNewGame()" data-i18n="start">Start</button>
          </div>
        </div>
      </div>

      <!-- ËßÜÈ¢ëÂàÜ‰∫´ÂØπËØùÊ°Ü -->
      <div id="share-dialog" class="dialog">
        <div class="dialog-content">
          <h3 data-i18n="share_video">ÂàÜ‰∫´‰Ω†ÁöÑÊ∏∏ÊàèËßÜÈ¢ë</h3>
          <div class="dialog-body">
            <div class="share-preview">
              <div class="video-info">
                <span class="video-icon">üé¨</span>
                <div class="video-details">
                  <div class="video-title" data-i18n="video_ready">ËßÜÈ¢ëÂ∑≤ÂáÜÂ§áÂ∞±Áª™ÔºÅ</div>
                  <div class="video-subtitle" data-i18n="share_your_skills">Â±ïÁ§∫‰Ω†ÁöÑ2048ÊäÄÂ∑ß</div>
                </div>
              </div>
            </div>
            
            <div class="share-text-section">
              <label data-i18n="share_caption">ÂàÜ‰∫´ÊñáÊ°àÔºö</label>
              <textarea id="share-caption" rows="3" placeholder="Ëá™Âä®ÁîüÊàêÁöÑÂàÜ‰∫´ÊñáÊ°à..."></textarea>
            </div>
            
            <div class="social-buttons">
              <button class="social-btn youtube-btn" onclick="shareToYouTube()">
                <span class="social-icon">üì∫</span>
                <span data-i18n="share_youtube">YouTube</span>
              </button>
              <button class="social-btn twitter-btn" onclick="shareToTwitter()">
                <span class="social-icon">üê¶</span>
                <span data-i18n="share_twitter">Twitter/X</span>
              </button>
              <button class="social-btn tiktok-btn" onclick="shareToTikTok()">
                <span class="social-icon">üéµ</span>
                <span data-i18n="share_tiktok">TikTok</span>
              </button>
              <button class="social-btn instagram-btn" onclick="shareToInstagram()">
                <span class="social-icon">üì∑</span>
                <span data-i18n="share_instagram">Instagram</span>
              </button>
            </div>
            
            <div class="share-actions">
              <button class="action-btn download-btn" onclick="downloadVideoOnly()">
                <span class="action-icon">üíæ</span>
                <span data-i18n="download_only">‰ªÖ‰∏ãËΩΩ</span>
              </button>
              <button class="action-btn copy-btn" onclick="copyShareText()">
                <span class="action-icon">üìã</span>
                <span data-i18n="copy_caption">Â§çÂà∂ÊñáÊ°à</span>
              </button>
            </div>
          </div>
          <div class="dialog-footer">
            <button class="dialog-btn cancel-btn" onclick="hideShareDialog()" data-i18n="close">ÂÖ≥Èó≠</button>
          </div>
        </div>
      </div>
    </nav>

    <div class="game-container">
      <div class="game-message">
        <p></p>
        <div class="lower">
	        <a class="keep-playing-button" data-i18n="keep_going">Keep going</a>
          <a class="retry-button" data-i18n="try_again">Try again</a>
        </div>
      </div>

      <div class="grid-container">
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
      </div>

      <div class="tile-container">

      </div>
    </div>

    <!-- Á§æ‰∫§Â™í‰ΩìÂàÜ‰∫´Âå∫Âüü -->
    <div class="social-share">
      <h3 class="share-title" data-i18n="share_title">Share Your Score</h3>
      <div class="social-buttons">
        <button class="social-btn twitter-btn" onclick="shareToTwitter()" title="Share on Twitter">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="#1DA1F2" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
          </svg>
        </button>
        <button class="social-btn facebook-btn" onclick="shareToFacebook()" title="Share on Facebook">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </button>
        <button class="social-btn linkedin-btn" onclick="shareToLinkedIn()" title="Share on LinkedIn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="#0077B5" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </button>
        <button class="social-btn reddit-btn" onclick="shareToReddit()" title="Share on Reddit">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="#FF4500" d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534C4.564 12.205 4.16 11.622 4.16 10.956c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
          </svg>
        </button>
        <button class="social-btn pinterest-btn" onclick="shareToPinterest()" title="Share on Pinterest">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="#BD081C" d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-12C24.007 5.367 18.641.001 12.017.001z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- ÊñπÂêëÈîÆÊåáÁ§∫ -->
    <div class="arrow-keys">
      <div class="arrow-key arrow-up">‚Üë</div>
      <div class="arrow-middle">
        <div class="arrow-key arrow-left">‚Üê</div>
        <div class="arrow-key arrow-down">‚Üì</div>
        <div class="arrow-key arrow-right">‚Üí</div>
      </div>
    </div>

    <div class="how-to-play">
      <div class="how-to-play-icon">üéÆ</div>
      <div class="how-to-play-content">
        <strong data-i18n="how_to_play">How to play:</strong> <span data-i18n="how_to_play_desc">Use your <strong>arrow keys</strong> to move the tiles. When two tiles with the same number touch, they <strong>merge into one!</strong></span>
      </div>
    </div>

    <div class="tips-section">
      <h3 class="tips-title" data-i18n="pro_tips_title">Pro Tips for 2048</h3>
      <div class="tips-grid">
        <div class="tip-card">
          <div class="tip-number">1</div>
          <h4 data-i18n="tip1_title">Anchor Your Biggest Tile</h4>
          <p data-i18n="tip1_desc">Pick one corner as your "home" for the highest value (working toward 2048). Always slide toward that corner first, and avoid moves that pull it away. This stable anchor keeps your path to 2048 clear.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">2</div>
          <h4 data-i18n="tip2_title">Build a Descending "Snake"</h4>
          <p data-i18n="tip2_desc">Arrange tiles in a smooth decreasing order from your chosen corner: for example, 512‚Äì256‚Äì128‚Äì64 along the top row, then continue down. This staircase layout makes merging toward 2048 predictable.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">3</div>
          <h4 data-i18n="tip3_title">Stick to Two Directions</h4>
          <p data-i18n="tip3_desc">Use just Left and Down (if your corner is bottom‚Äëleft) for most moves. Limiting yourself avoids accidental shifts that break your snake and set back your 2048 goal. Only use Up or Right to escape a deadlock.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">4</div>
          <h4 data-i18n="tip4_title">Plan Merges Ahead</h4>
          <p data-i18n="tip4_desc">Before each swipe, ask:<br><br>Will this merge help build toward 2048?<br><br>Can I keep my highest tile anchored?<br><br>Am I opening space for the next spawn?<br><br>Thinking two moves ahead prevents careless plays.</p>
        </div>
        <div class="tip-card">
          <div class="tip-number">5</div>
          <h4 data-i18n="tip5_title">Keep Some Empty Space</h4>
          <p data-i18n="tip5_desc">Aim to have 2‚Äì4 open cells. Too many empties slow momentum; too few and you'll block merges. A mostly full board with room to slide keeps you on track for that final 2048 merge.</p>
        </div>
      </div>
      
      <div class="key-takeaway">
        <div class="takeaway-icon">üéØ</div>
        <div class="takeaway-content">
          <strong data-i18n="key_takeaway">Key Takeaway:</strong> <span data-i18n="key_takeaway_desc">Anchor, snake pattern, two‚Äëdirection rule, and thoughtful merges are your blueprint for hitting 2048. Good luck!</span>
        </div>
      </div>
    </div>
  </div>

  <!-- html2canvasÂ∫ìÁî®‰∫éÊ∏∏ÊàèÂå∫ÂüüÂΩïÂà∂ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  
  <script src="js/i18n.js?v=20250806170458"></script>
  <script src="js/bind_polyfill.js?v=20250806170458"></script>
  <script src="js/classlist_polyfill.js?v=20250806170458"></script>
  <script src="js/animframe_polyfill.js?v=20250806170458"></script>
  <script src="js/keyboard_input_manager.js?v=20250806170458"></script>
  <script src="js/html_actuator.js?v=20250806170458"></script>
  <script src="js/grid.js?v=20250806170458"></script>
  <script src="js/tile.js?v=20250806170458"></script>
  <script src="js/local_storage_manager.js?v=20250806170458"></script>
  <script src="js/game_manager.js?v=20250806170458"></script>
  <script src="js/application.js?v=20250806170458"></script>
  
  <!-- Êñ∞Ê∏∏ÊàèÂØπËØùÊ°ÜÊéßÂà∂ -->
  <script>
    let selectedCorner = null;

    function showNewGameDialog() {
      console.log('showNewGameDialog called'); // Ë∞ÉËØï‰ø°ÊÅØ
      const dialog = document.getElementById('new-game-dialog');
      console.log('dialog element:', dialog); // Ë∞ÉËØï‰ø°ÊÅØ
      
      if (!dialog) {
        console.error('Dialog element not found!');
        return;
      }
      
      dialog.classList.add('show');
      console.log('Dialog classes after adding show:', dialog.className); // Ë∞ÉËØï‰ø°ÊÅØ
      
      // Âú®ÁßªÂä®Á´ØÔºåÈòªÊ≠¢ÂØπËØùÊ°Ü‰ª•Â§ñÁöÑËß¶Êë∏ÊªöÂä®
      if ('ontouchstart' in window) {
        document.body.style.overflow = 'hidden';
        
        // ÁÇπÂáªÂØπËØùÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
        dialog.addEventListener('touchstart', function(e) {
          if (e.target === dialog) {
            hideNewGameDialog();
          }
        }, { once: true });
      }
    }

    function hideNewGameDialog() {
      document.getElementById('new-game-dialog').classList.remove('show');
      document.body.style.overflow = '';
    }

    // ÈÄâÊã©ËßíËêΩ‰ΩçÁΩÆ
    document.querySelectorAll('.corner-btn').forEach(btn => {
      function handleSelection() {
        // ÁßªÈô§ÂÖ∂‰ªñÊåâÈíÆÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
        document.querySelectorAll('.corner-btn').forEach(b => b.classList.remove('selected'));
        // Ê∑ªÂä†ÂΩìÂâçÊåâÈíÆÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
        btn.classList.add('selected');
        // ‰øùÂ≠òÈÄâ‰∏≠ÁöÑËßíËêΩÂùêÊ†á
        selectedCorner = btn.getAttribute('data-corner').split(',').map(Number);
      }

      // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        handleSelection();
      });
      
      // Ê∑ªÂä†Ëß¶Êë∏‰∫ã‰ª∂ÊîØÊåÅ
      btn.addEventListener('touchend', function(e) {
        e.preventDefault();
        handleSelection();
      });
      
      // Èò≤Ê≠¢Ëß¶Êë∏Êó∂ÁöÑÈªòËÆ§Ë°å‰∏∫
      btn.addEventListener('touchstart', function(e) {
        e.preventDefault();
      });
    });

    function startNewGame() {
      if (!selectedCorner) {
        alert(I18N.t('please_select_corner'));
        return;
      }

      const startNumber = document.getElementById('start-number').value;
      const cornerPosition = { x: selectedCorner[0], y: selectedCorner[1] };
      
      console.log('Selected corner array:', selectedCorner);
      console.log('Corner position object:', cornerPosition);
      console.log('Start number:', startNumber);

      // ÈáçÂêØÊ∏∏Êàè
      window.gameManager.restart(startNumber, cornerPosition);
      
      // ÈöêËóèÂØπËØùÊ°Ü
      hideNewGameDialog();
      
      // ÈáçÁΩÆÈÄâÊã©Áä∂ÊÄÅ
      selectedCorner = null;
      document.querySelectorAll('.corner-btn').forEach(b => b.classList.remove('selected'));
    }
  </script>

  <!-- Á§æ‰∫§Â™í‰ΩìÂàÜ‰∫´ÂäüËÉΩ -->
  <script>
    // ÁºìÂ≠òÊúÄÂ§ßÂÄº
    window.currentMaxTile = 2;
    
    // Êõ¥Êñ∞ÊúÄÂ§ßÂÄºÔºàÁî±Ê∏∏ÊàèÁÆ°ÁêÜÂô®Ë∞ÉÁî®Ôºâ
    window.updateMaxTileValue = function() {
      // Á°Æ‰øùÊ∏∏ÊàèÁÆ°ÁêÜÂô®Â∑≤ÂàùÂßãÂåñ
      if (!window.gameManager) {
        console.log('Ê∏∏ÊàèÁÆ°ÁêÜÂô®Êú™ÂàùÂßãÂåñ');
        return;
      }
      
      // Á°Æ‰øùÁΩëÊ†ºÂ∑≤ÂàùÂßãÂåñ
      if (!window.gameManager.grid) {
        console.log('ÁΩëÊ†ºÊú™ÂàùÂßãÂåñ');
        return;
      }
      
      var cells = window.gameManager.grid.cells;
      var newMaxValue = 2;
      
      // ÈÅçÂéÜÊâÄÊúâÊ†ºÂ≠ê
      for (var x = 0; x < cells.length; x++) {
        for (var y = 0; y < cells[x].length; y++) {
          var tile = cells[x][y];
          if (tile && tile.value > newMaxValue) {
            newMaxValue = tile.value;
          }
        }
      }
      
      // Êõ¥Êñ∞ÁºìÂ≠òÁöÑÊúÄÂ§ßÂÄº
      window.currentMaxTile = newMaxValue;
      console.log('ÊúÄÂ§ßÂÄºÂ∑≤Êõ¥Êñ∞:', newMaxValue);
    };
    
    // Ëé∑ÂèñÊúÄÂ§ßÁöÑtileÂÄº
    function getMaxTileValue() {
      // Â¶ÇÊûúÊ∏∏ÊàèÁÆ°ÁêÜÂô®Â∑≤ÂàùÂßãÂåñÔºåÂº∫Âà∂Êõ¥Êñ∞‰∏ÄÊ¨°ÊúÄÂ§ßÂÄº
      if (window.gameManager && window.gameManager.grid) {
        window.updateMaxTileValue();
      }
      return window.currentMaxTile;
    }
    
    // Ëé∑ÂèñÂΩìÂâçÂàÜÊï∞
    function getCurrentScore() {
      return window.gameManager ? window.gameManager.score : 0;
    }
    
    // ÁîüÊàêÂàÜ‰∫´ÊñáÊ°à
    function generateShareText() {
      var score = getCurrentScore();
      var maxTile = getMaxTileValue();
      var baseText = "";
      
      if (score > 0) {
        baseText = I18N.t("share_text_with_score", {score: score.toLocaleString(), maxTile: maxTile});
      } else {
        baseText = I18N.t("share_text_no_score", {maxTile: maxTile});
      }
      
      return baseText + " www.play2048online.com";
    }
    
    // TwitterÂàÜ‰∫´
    function shareToTwitter() {
      var text = generateShareText();
      var url = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(text);
      window.open(url, '_blank', 'width=550,height=420');
    }
    
    // FacebookÂàÜ‰∫´
    function shareToFacebook() {
      var text = generateShareText();
      var url = "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent("https://www.play2048online.com") + "&quote=" + encodeURIComponent(text);
      window.open(url, '_blank', 'width=580,height=296');
    }
    
    // LinkedInÂàÜ‰∫´
    function shareToLinkedIn() {
      var text = generateShareText();
      var url = "https://www.linkedin.com/sharing/share-offsite/?url=" + encodeURIComponent("https://www.play2048online.com") + "&title=" + encodeURIComponent("2048 Game") + "&summary=" + encodeURIComponent(text);
      window.open(url, '_blank', 'width=520,height=570');
    }
    
    // RedditÂàÜ‰∫´
    function shareToReddit() {
      var text = generateShareText();
      var title = "My 2048 Game Score: " + getCurrentScore().toLocaleString() + " points!";
      var url = "https://www.reddit.com/submit?url=" + encodeURIComponent("https://www.play2048online.com") + "&title=" + encodeURIComponent(title) + "&text=" + encodeURIComponent(text);
      window.open(url, '_blank', 'width=600,height=500');
    }
    
    // PinterestÂàÜ‰∫´
    function shareToPinterest() {
      var text = generateShareText();
      var url = "https://pinterest.com/pin/create/button/?url=" + encodeURIComponent("https://www.play2048online.com") + "&description=" + encodeURIComponent(text);
      window.open(url, '_blank', 'width=750,height=320');
    }

    // Ê∏∏ÊàèÂå∫ÂüüÂΩïÂà∂ÂäüËÉΩ
    let mediaRecorder;
    let recordedChunks = [];
    let isRecording = false;
    let recordingCanvas;
    let recordingContext;
    let recordingStream;
    let recordingInterval;



    async function toggleRecording() {
      const recordButton = document.getElementById('record-button');
      const recordIcon = recordButton.querySelector('.record-icon');
      const recordText = recordButton.querySelector('.record-text');
      
      if (!isRecording) {
        try {
          // ÂºÄÂßãÂΩïÂà∂
          await startRecording();
          isRecording = true;
          recordIcon.textContent = '‚èπÔ∏è';
          recordText.textContent = I18N.t('stop_recording');
          recordButton.classList.add('recording');
        } catch (error) {
          console.error('Êó†Ê≥ïÂºÄÂßãÂΩïÂà∂:', error);
          alert(I18N.t('recording_error'));
        }
      } else {
        // ÂÅúÊ≠¢ÂΩïÂà∂
        stopRecording();
        isRecording = false;
        recordIcon.textContent = 'üé•';
        recordText.textContent = I18N.t('start_recording');
        recordButton.classList.remove('recording');
      }
    }

    async function startRecording() {
      recordedChunks = [];
      
      try {
        // Ëé∑ÂèñÊ∏∏ÊàèÂÆπÂô®ÂÖÉÁ¥†
        const gameContainer = document.querySelector('.game-container');
        if (!gameContainer) {
          throw new Error('Game container not found');
        }

        // Ëé∑ÂèñÊ∏∏ÊàèÂÆπÂô®ÁöÑÂ∞∫ÂØ∏Âíå‰ΩçÁΩÆ
        const containerRect = gameContainer.getBoundingClientRect();
        const containerStyle = window.getComputedStyle(gameContainer);
        
        // ËÆ°ÁÆóÂÆûÈôÖÁöÑÂÜÖÂÆπÂå∫ÂüüÔºàÂáèÂéªpaddingÂíåborderÔºâ
        const paddingLeft = parseInt(containerStyle.paddingLeft) || 0;
        const paddingTop = parseInt(containerStyle.paddingTop) || 0;
        const paddingRight = parseInt(containerStyle.paddingRight) || 0;
        const paddingBottom = parseInt(containerStyle.paddingBottom) || 0;
        const borderLeft = parseInt(containerStyle.borderLeftWidth) || 0;
        const borderTop = parseInt(containerStyle.borderTopWidth) || 0;
        const borderRight = parseInt(containerStyle.borderRightWidth) || 0;
        const borderBottom = parseInt(containerStyle.borderBottomWidth) || 0;

        // ËÆ°ÁÆóÂΩïÂà∂Âå∫ÂüüÁöÑÂÆûÈôÖÂ∞∫ÂØ∏
        const recordWidth = containerRect.width - paddingLeft - paddingRight - borderLeft - borderRight;
        const recordHeight = containerRect.height - paddingTop - paddingBottom - borderTop - borderBottom;

        // ÂàõÂª∫Áî®‰∫éÂΩïÂà∂ÁöÑcanvas
        recordingCanvas = document.createElement('canvas');
        recordingCanvas.width = recordWidth;
        recordingCanvas.height = recordHeight;
        recordingContext = recordingCanvas.getContext('2d');

        // ËÆæÁΩÆÈ´òË¥®ÈáèÊ∏≤Êüì
        recordingContext.imageSmoothingEnabled = true;
        recordingContext.imageSmoothingQuality = 'high';

        // ÂàõÂª∫ËßÜÈ¢ëÊµÅ
        recordingStream = recordingCanvas.captureStream(30); // 30 FPS

        // ÂàõÂª∫MediaRecorder
        const options = {
          mimeType: 'video/webm;codecs=vp9'
        };
        
        // Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅÁöÑÁºñÁ†ÅÊ†ºÂºè
        if (!MediaRecorder.isTypeSupported(options.mimeType)) {
          options.mimeType = 'video/webm;codecs=vp8';
          if (!MediaRecorder.isTypeSupported(options.mimeType)) {
            options.mimeType = 'video/webm';
            if (!MediaRecorder.isTypeSupported(options.mimeType)) {
              options.mimeType = '';
            }
          }
        }

        mediaRecorder = new MediaRecorder(recordingStream, options);
        
        mediaRecorder.ondataavailable = function(event) {
          if (event.data.size > 0) {
            recordedChunks.push(event.data);
          }
        };
        
        mediaRecorder.onstop = function() {
          saveRecording();
          // Ê∏ÖÁêÜËµÑÊ∫ê
          if (recordingInterval) {
            cancelAnimationFrame(recordingInterval);
            recordingInterval = null;
          }
          recordingCanvas = null;
          recordingContext = null;
        };

        // ÂºÄÂßãÂΩïÂà∂
        mediaRecorder.start(1000); // ÊØèÁßíÊî∂ÈõÜ‰∏ÄÊ¨°Êï∞ÊçÆ
        
        // ÂºÄÂßãÊçïËé∑Ê∏∏ÊàèÂå∫Âüü
        startGameAreaCapture(gameContainer, paddingLeft + borderLeft, paddingTop + borderTop);
        
      } catch (error) {
        throw error;
      }
    }

    function startGameAreaCapture(gameContainer, offsetX, offsetY) {
      let frameCount = 0;
      let lastFrameTime = 0;
      const targetFPS = 30;
      const frameInterval = 1000 / targetFPS;
      
      function captureFrame(currentTime) {
        if (!isRecording || !recordingContext) return;

        // ÊéßÂà∂Â∏ßÁéáÔºåÁ°Æ‰øùÁ®≥ÂÆöÁöÑ30FPS
        if (currentTime - lastFrameTime < frameInterval) {
          recordingInterval = requestAnimationFrame(captureFrame);
          return;
        }
        
        lastFrameTime = currentTime;
        frameCount++;

        try {
          // ‰ºòÂÖà‰ΩøÁî®ÂéüÁîüCanvasÁªòÂà∂ÔºåÈÅøÂÖçhtml2canvasÁöÑÂºÇÊ≠•ÈóÆÈ¢ò
          captureGameAreaDirect(gameContainer);
          
          // ÁªßÁª≠‰∏ã‰∏ÄÂ∏ß
          if (isRecording) {
            recordingInterval = requestAnimationFrame(captureFrame);
          }
        } catch (error) {
          console.warn('Frame capture error:', error);
          if (isRecording) {
            recordingInterval = requestAnimationFrame(captureFrame);
          }
        }
      }

      // ÂºÄÂßãÂΩïÂà∂Âæ™ÁéØ
      recordingInterval = requestAnimationFrame(captureFrame);
    }

    function captureGameAreaDirect(gameContainer) {
      // ‰ºòÂåñÁöÑÊ∏∏ÊàèÂå∫ÂüüÁªòÂà∂ÔºåÂáèÂ∞ëÈó™ÁÉÅ
      if (!recordingContext || !isRecording) return;

      const containerRect = gameContainer.getBoundingClientRect();
      
      // Ëé∑ÂèñÊ∏∏ÊàèÂÆπÂô®ÁöÑÂÆûÈôÖËÉåÊôØÈ¢úËâ≤
      const containerStyle = window.getComputedStyle(gameContainer);
      const containerBgColor = containerStyle.backgroundColor || '#faf8ef';
      
      // Ê∏ÖÁ©∫canvasÂπ∂ËÆæÁΩÆËÉåÊôØ
      recordingContext.fillStyle = containerBgColor;
      recordingContext.fillRect(0, 0, recordingCanvas.width, recordingCanvas.height);

      // ÂÖàÁªòÂà∂ÁΩëÊ†ºËÉåÊôØ
      const gridCells = gameContainer.querySelectorAll('.grid-cell');
      
      gridCells.forEach(cell => {
        const rect = cell.getBoundingClientRect();
        const x = rect.left - containerRect.left;
        const y = rect.top - containerRect.top;
        
        // Ëé∑ÂèñÁΩëÊ†ºÂçïÂÖÉÊ†ºÁöÑÂÆûÈôÖÊ†∑Âºè
        const cellStyle = window.getComputedStyle(cell);
        const cellBgColor = cellStyle.backgroundColor;
        const borderRadius = parseInt(cellStyle.borderRadius) || 8;
        
        // ÁªòÂà∂ÁΩëÊ†ºÂçïÂÖÉÊ†º
        recordingContext.fillStyle = cellBgColor;
        
        // ÁªòÂà∂ÂúÜËßíÁü©ÂΩ¢
        if (typeof recordingContext.roundRect === 'function') {
          recordingContext.beginPath();
          recordingContext.roundRect(x, y, rect.width, rect.height, borderRadius);
          recordingContext.fill();
        } else {
          recordingContext.fillRect(x, y, rect.width, rect.height);
        }
      });

      // ÂÜçÁªòÂà∂ÊâÄÊúâÁì¶Áâá
      const tiles = gameContainer.querySelectorAll('.tile');
      const tileArray = Array.from(tiles);
      
      // Êåâz-indexÊéíÂ∫èÔºåÁ°Æ‰øùÊ≠£Á°ÆÁöÑÂ±ÇÁ∫ß
      tileArray.sort((a, b) => {
        const aZ = parseInt(window.getComputedStyle(a).zIndex) || 0;
        const bZ = parseInt(window.getComputedStyle(b).zIndex) || 0;
        return aZ - bZ;
      });

      tileArray.forEach(tile => {
        const rect = tile.getBoundingClientRect();
        const style = window.getComputedStyle(tile);
        
        // Ë∑≥Ëøá‰∏çÂèØËßÅÁöÑÁì¶Áâá
        if (style.opacity === '0' || style.visibility === 'hidden' || style.display === 'none') {
          return;
        }
        
        const x = rect.left - containerRect.left;
        const y = rect.top - containerRect.top;
        
        // Ëé∑ÂèñÁì¶ÁâáÂÆûÈôÖÊ†∑Âºè
        const text = tile.textContent.trim();
        const opacity = parseFloat(style.opacity) || 1;
        
        // Êü•Êâæ.tile-innerÂÖÉÁ¥†Ëé∑ÂèñÁúüÂÆûÊ†∑Âºè
        const tileInner = tile.querySelector('.tile-inner');
        if (!tileInner) return; // Â¶ÇÊûúÊ≤°Êúâ.tile-innerÔºåË∑≥Ëøá
        
        const innerStyle = window.getComputedStyle(tileInner);
        const bgColor = innerStyle.backgroundColor;
        const color = innerStyle.color;
        const fontSize = parseInt(innerStyle.fontSize) || 55;

        // ËÆæÁΩÆÈÄèÊòéÂ∫¶
        recordingContext.globalAlpha = opacity;

        // ÁªòÂà∂Áì¶ÁâáËÉåÊôØÔºàÂ∏¶ÂúÜËßíÊïàÊûúÔºâ
        recordingContext.fillStyle = bgColor;
        const borderRadius = parseInt(innerStyle.borderRadius) || 6;
        
        // Ê£ÄÊü•roundRectÊîØÊåÅÔºå‰∏çÊîØÊåÅÂàô‰ΩøÁî®ÊôÆÈÄöÁü©ÂΩ¢
        if (typeof recordingContext.roundRect === 'function') {
          recordingContext.beginPath();
          recordingContext.roundRect(x, y, rect.width, rect.height, borderRadius);
          recordingContext.fill();
        } else {
          // ÈôçÁ∫ßÊñπÊ°àÔºö‰ΩøÁî®ÊôÆÈÄöÁü©ÂΩ¢
          recordingContext.fillRect(x, y, rect.width, rect.height);
        }

        // ÁªòÂà∂Áì¶ÁâáÊñáÊú¨
        if (text && text !== '') {
          recordingContext.fillStyle = color;
          recordingContext.font = `bold ${fontSize}px "Clear Sans", "Helvetica Neue", Arial, sans-serif`;
          recordingContext.textAlign = 'center';
          recordingContext.textBaseline = 'middle';
          
          // Ê∑ªÂä†ÊñáÊú¨Èò¥ÂΩ±ÊïàÊûúÔºàÂØπ‰∫éÈ´òÊï∞ÂÄºÁì¶ÁâáÔºâ
          if (parseInt(text) >= 8) {
            recordingContext.shadowColor = 'rgba(0,0,0,0.1)';
            recordingContext.shadowOffsetX = 1;
            recordingContext.shadowOffsetY = 1;
            recordingContext.shadowBlur = 2;
          }
          
          recordingContext.fillText(text, x + rect.width/2, y + rect.height/2);
          
          // Ê∏ÖÈô§Èò¥ÂΩ±
          recordingContext.shadowColor = 'transparent';
        }

        // ÈáçÁΩÆÈÄèÊòéÂ∫¶
        recordingContext.globalAlpha = 1;
      });
    }

    function stopRecording() {
      if (recordingInterval) {
        cancelAnimationFrame(recordingInterval);
        recordingInterval = null;
      }
      
      if (mediaRecorder && mediaRecorder.state === 'recording') {
        mediaRecorder.stop();
      }
      
      if (recordingStream) {
        recordingStream.getTracks().forEach(track => {
          track.stop();
        });
      }
    }

    function saveRecording() {
      if (recordedChunks.length === 0) {
        alert(I18N.t('no_recording_data'));
        return;
      }
      
      // ÂàõÂª∫ËßÜÈ¢ëblob
      const blob = new Blob(recordedChunks, {
        type: 'video/webm'
      });
      
      // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.style.display = 'none';
      a.href = url;
      
      // ÁîüÊàêÊñá‰ª∂Âêç
      const now = new Date();
      const timestamp = now.getFullYear() + 
        String(now.getMonth() + 1).padStart(2, '0') + 
        String(now.getDate()).padStart(2, '0') + '_' +
        String(now.getHours()).padStart(2, '0') + 
        String(now.getMinutes()).padStart(2, '0') + 
        String(now.getSeconds()).padStart(2, '0');
      
      a.download = `2048_game_${timestamp}.webm`;
      
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      
      // Ê∏ÖÁêÜËµÑÊ∫ê
      setTimeout(() => {
        URL.revokeObjectURL(url);
      }, 100);
      
      // Ê∏ÖÁ©∫ÂΩïÂà∂Êï∞ÊçÆ
      recordedChunks = [];
      
      // ÊòæÁ§∫ÂàÜ‰∫´ÂØπËØùÊ°Ü
      showShareDialog(blob, `2048_game_${timestamp}.webm`);
    }

    // ÂàÜ‰∫´ÂØπËØùÊ°ÜÂäüËÉΩ
    let currentVideoBlob = null;
    let currentVideoFilename = '';

    function showShareDialog(blob, filename) {
      currentVideoBlob = blob;
      currentVideoFilename = filename;
      
      const shareDialog = document.getElementById('share-dialog');
      const shareCaption = document.getElementById('share-caption');
      
      // ÁîüÊàêÂàÜ‰∫´ÊñáÊ°à
      const caption = generateVideoShareText();
      shareCaption.value = caption;
      
      shareDialog.classList.add('show');
    }

    function hideShareDialog() {
      const shareDialog = document.getElementById('share-dialog');
      shareDialog.classList.remove('show');
      
      // Ê∏ÖÁêÜËµÑÊ∫ê
      if (currentVideoBlob) {
        currentVideoBlob = null;
        currentVideoFilename = '';
      }
    }

    function generateVideoShareText() {
      const currentScore = getCurrentScore();
      const maxTile = getMaxTile();
      const lang = I18N.lang || 'ru';
      
      const templates = {
        en: [
          `üéÆ Just recorded my 2048 gameplay! Scored ${currentScore.toLocaleString()} points with max tile ${maxTile}! üöÄ\n\n#2048Game #PuzzleGame #Gaming #SkillShow`,
          `üß† Check out my 2048 strategy in action! Reached ${maxTile} tile with ${currentScore.toLocaleString()} points! üéØ\n\n#2048Challenge #BrainGame #GamingSkills`,
          `üî• My latest 2048 run - ${currentScore.toLocaleString()} points and ${maxTile} max tile! Can you beat this? üí™\n\n#2048Master #PuzzleMaster #GamingChallenge`
        ],
        de: [
          `üéÆ Gerade mein 2048-Gameplay aufgenommen! ${currentScore.toLocaleString()} Punkte mit maximalem Stein ${maxTile}! üöÄ\n\n#2048Spiel #Denkspiel #Gaming #K√∂nnen`,
          `üß† Schaut euch meine 2048-Strategie an! ${maxTile}-Stein mit ${currentScore.toLocaleString()} Punkten erreicht! üéØ\n\n#2048Herausforderung #Denkspiel`,
          `üî• Mein neuester 2048-Lauf - ${currentScore.toLocaleString()} Punkte und ${maxTile} maximaler Stein! K√∂nnt ihr das schlagen? üí™\n\n#2048Meister`
        ],
        ja: [
          `üéÆ 2048„ÅÆ„Ç≤„Éº„É†„Éó„É¨„Ç§„ÇíÈå≤Áîª„Åó„Åæ„Åó„ÅüÔºÅ${currentScore.toLocaleString()}ÁÇπ„ÅßÊúÄÂ§ß„Çø„Ç§„É´${maxTile}ÔºÅüöÄ\n\n#2048„Ç≤„Éº„É† #„Éë„Ç∫„É´„Ç≤„Éº„É† #„Ç≤„Éº„Éü„É≥„Ç∞ #„Çπ„Ç≠„É´`,
          `üß† ÁßÅ„ÅÆ2048Êà¶Áï•„Çí„ÅîË¶ß„Åè„Å†„Åï„ÅÑÔºÅ${maxTile}„Çø„Ç§„É´„Åß${currentScore.toLocaleString()}ÁÇπÈÅîÊàêÔºÅüéØ\n\n#2048„ÉÅ„É£„É¨„É≥„Ç∏ #ËÑ≥„Éà„É¨`,
          `üî• ÊúÄÊñ∞„ÅÆ2048„Éó„É¨„Ç§ - ${currentScore.toLocaleString()}ÁÇπ„ÄÅÊúÄÂ§ß„Çø„Ç§„É´${maxTile}ÔºÅ„Åì„Çå„ÇíË∂Ö„Åà„Çâ„Çå„ÇãÔºüüí™\n\n#2048„Éû„Çπ„Çø„Éº`
        ],
        ru: [
          `üéÆ –ó–∞–ø–∏—Å–∞–ª —Å–≤–æ—é –∏–≥—Ä—É –≤ 2048! –ù–∞–±—Ä–∞–ª ${currentScore.toLocaleString()} –æ—á–∫–æ–≤ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø–ª–∏—Ç–∫–æ–π ${maxTile}! üöÄ\n\n#2048–ò–≥—Ä–∞ #–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ #–ì–µ–π–º–∏–Ω–≥ #–ù–∞–≤—ã–∫–∏`,
          `üß† –°–º–æ—Ç—Ä–∏—Ç–µ –º–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é 2048 –≤ –¥–µ–π—Å—Ç–≤–∏–∏! –î–æ—Å—Ç–∏–≥ –ø–ª–∏—Ç–∫–∏ ${maxTile} —Å ${currentScore.toLocaleString()} –æ—á–∫–∞–º–∏! üéØ\n\n#2048–í—ã–∑–æ–≤ #–ú–æ–∑–≥–æ–≤–∞—è –∏–≥—Ä–∞`,
          `üî• –ú–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–±–µ–≥ –≤ 2048 - ${currentScore.toLocaleString()} –æ—á–∫–æ–≤ –∏ –ø–ª–∏—Ç–∫–∞ ${maxTile}! –°–º–æ–∂–µ—Ç–µ –ø–æ–±–∏—Ç—å? üí™\n\n#2048–ú–∞—Å—Ç–µ—Ä #–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞`
        ]
      };
      
      const langTemplates = templates[lang] || templates['en'];
      const randomTemplate = langTemplates[Math.floor(Math.random() * langTemplates.length)];
      
      return randomTemplate;
    }

    function getMaxTile() {
      const tiles = document.querySelectorAll('.tile .tile-inner');
      let maxValue = 0;
      
      tiles.forEach(tile => {
        const value = parseInt(tile.textContent) || 0;
        if (value > maxValue) {
          maxValue = value;
        }
      });
      
      return maxValue || 2;
    }

    function shareToYouTube() {
      const caption = document.getElementById('share-caption').value;
      const title = encodeURIComponent(`2048 Game - ${getCurrentScore()} Points!`);
      const description = encodeURIComponent(caption);
      
      // ÊâìÂºÄYouTube‰∏ä‰º†È°µÈù¢
      window.open(`https://www.youtube.com/upload`, '_blank');
      
      // Â§çÂà∂ÊñáÊ°àÂà∞Ââ™Ë¥¥Êùø
      copyToClipboard(caption);
      alert(I18N.t('youtube_upload_hint'));
    }

    function shareToTwitter() {
      const caption = document.getElementById('share-caption').value;
      const tweetText = encodeURIComponent(caption + '\n\nPlay online: https://www.play2048online.com');
      
      window.open(`https://twitter.com/intent/tweet?text=${tweetText}`, '_blank');
    }

    function shareToTikTok() {
      const caption = document.getElementById('share-caption').value;
      
      // TikTokÁõÆÂâç‰∏çÊîØÊåÅÁõ¥Êé•APIÂàÜ‰∫´ÔºåÊâìÂºÄTikTokÂàõ‰ΩúÈ°µÈù¢
      window.open('https://www.tiktok.com/upload', '_blank');
      
      copyToClipboard(caption);
      alert(I18N.t('tiktok_upload_hint'));
    }

    function shareToInstagram() {
      const caption = document.getElementById('share-caption').value;
      
      // Instagram‰∏çÊîØÊåÅÁõ¥Êé•ÂàÜ‰∫´ÔºåÊèêÁ§∫Áî®Êà∑
      copyToClipboard(caption);
      alert(I18N.t('instagram_upload_hint'));
    }

    function downloadVideoOnly() {
      if (!currentVideoBlob) return;
      
      const url = URL.createObjectURL(currentVideoBlob);
      const a = document.createElement('a');
      a.style.display = 'none';
      a.href = url;
      a.download = currentVideoFilename;
      
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      
      setTimeout(() => {
        URL.revokeObjectURL(url);
      }, 100);
      
      hideShareDialog();
    }

    function copyShareText() {
      const caption = document.getElementById('share-caption').value;
      copyToClipboard(caption);
      alert(I18N.t('caption_copied'));
    }

    function copyToClipboard(text) {
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text);
      } else {
        // ÈôçÁ∫ßÊñπÊ°à
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
      }
    }

    // È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅ
    document.addEventListener('DOMContentLoaded', function() {
      const recordButton = document.getElementById('record-button');
      
      // Ê£ÄÊü•ÊµèËßàÂô®ÊòØÂê¶ÊîØÊåÅCanvasÂΩïÂà∂ÂäüËÉΩ
      if (!window.MediaRecorder || !HTMLCanvasElement.prototype.captureStream) {
        recordButton.style.display = 'none';
        console.log('ÊµèËßàÂô®‰∏çÊîØÊåÅCanvasÂΩïÂà∂ÂäüËÉΩ');
      }
    });
  </script>
  
  <footer>
    <span data-i18n="copyright">Copyright 2025 ¬© PLAY 2048 ONLINE. All rights reserved.</span>
  </footer>
  <div style="display: none;">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B30V9ME43C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-B30V9ME43C');
    </script>
    
  </div>
</body>
</html>
